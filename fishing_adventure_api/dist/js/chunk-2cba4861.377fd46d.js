(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cba4861"],{"0e08":function(e,t,i){},"3c64":function(e,t,i){"use strict";i("4e4e")},"3f90":function(e,t,i){"use strict";i.r(t);var a=i("7a23"),n=i("4de3"),r=i.n(n),o=function(e){return Object(a["I"])("data-v-5fd381c5"),e=e(),Object(a["G"])(),e},s=o((function(){return Object(a["i"])("div",{class:"title"},[Object(a["i"])("h1",null,"Reservations"),Object(a["i"])("img",{style:{height:"10rem"},src:r.a})],-1)})),c={style:{"background-color":"#212529",padding:"15px"}},l={class:"container w-100",style:{"flex-direction":"column"}},d={class:"row row-cols-1 row-cols-sm-1 row-cols-md-4",style:{"justify-content":"space-evenly","align-items":"center"}},h=o((function(){return Object(a["i"])("div",{class:"col-md-3"},[Object(a["i"])("input",{class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"})],-1)})),u={class:"col-md-4"},b=Object(a["k"])('<div class="col-md-2" data-v-5fd381c5><select class="form-select form-select-dark form-select-sm text-white bg-dark" aria-label=".form-select-sm example" data-v-5fd381c5><option selected data-v-5fd381c5>All statuses</option><option value="1" data-v-5fd381c5>Upcoming</option><option value="2" data-v-5fd381c5>Current</option><option value="3" data-v-5fd381c5>Finished</option><option value="4" data-v-5fd381c5>Report filled</option></select></div>',1),p={style:{"margin-top":"5%"}};function v(e,t,i,n,r,o){var v=Object(a["O"])("Datepicker"),m=Object(a["O"])("AdvertiserReservationCard"),O=Object(a["O"])("AdvertiserReservationModal"),f=Object(a["O"])("AdvertiserReportModal");return Object(a["F"])(),Object(a["h"])("div",null,[s,Object(a["i"])("div",c,[Object(a["i"])("div",l,[Object(a["i"])("div",d,[h,Object(a["i"])("div",u,[Object(a["m"])(v,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",id:"picker",modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.date=t}),range:"",placeholder:"Select date",enableTimePicker:!1},null,8,["modelValue"])]),b])])]),Object(a["i"])("div",p,[(Object(a["F"])(!0),Object(a["h"])(a["a"],null,Object(a["M"])(e.searchResults,(function(e){return Object(a["F"])(),Object(a["f"])(m,{key:e.id,entity:e,onCreateReservation:o.createReservation,onCreateReport:o.createReport},null,8,["entity","onCreateReservation","onCreateReport"])})),128))]),Object(a["m"])(O,{id:"AdvertiserReservationModal",clientEmail:e.clientEmail,clientName:e.clientName,clientSurname:e.clientSurname},null,8,["clientEmail","clientName","clientSurname"]),Object(a["m"])(f,{id:"AdvertiserReportModal",reportDto:e.reportDto},null,8,["reportDto"])])}i("b0c0");var m=function(e){return Object(a["I"])("data-v-93a73bbc"),e=e(),Object(a["G"])(),e},O={class:"card mb-3 bg-dark mt-3",style:{width:"65%",margin:"auto"}},f={class:"row g-0"},y={class:"col-md-4 shadow-none"},g=["src"],j={class:"col-md-8 shadow-none",name:"main-col"},w={class:"card-body shadow-none"},R={class:"card-text shadow-none",style:{display:"flex"}},k={class:"card-title shadow-none"},S={key:0,class:"reservationStatus shadow-none",style:{"background-color":"#a28800"}},D=m((function(){return Object(a["i"])("b",{class:"shadow-none"},"Upcoming",-1)})),P=[D],A={key:1,class:"reservationStatus shadow-none",style:{"background-color":"#41005f"}},x=m((function(){return Object(a["i"])("b",{class:"shadow-none"},"Finished",-1)})),F=[x],T={key:2,class:"reservationStatus shadow-none",style:{"background-color":"#0c442a"}},C=m((function(){return Object(a["i"])("b",{class:"shadow-none"},"Current",-1)})),M=[C],I={key:3,class:"reservationStatus shadow-none",style:{"background-color":"rgb(33 22 143)"}},B=m((function(){return Object(a["i"])("b",{class:"shadow-none"},"Report filled",-1)})),E=[B],H={class:"card-text shadow-none",style:{display:"flex","align-items":"center"}},N={class:"shadow-none",style:{width:"100%"}},L={class:"row shadow-none"},_=m((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Client: ",-1)})),U={class:"advertiserTitle shadow-none col-md-6",style:{"margin-left":"11px"}},z={key:0,class:"row shadow-none"},V=m((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Period: ",-1)})),W={class:"card-text text-left shadow-none col-md-8"},G={key:1,class:"row shadow-none"},$=m((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"},"Date:",-1)})),q={class:"card-text text-left shadow-none col-md-8"},J={class:"row shadow-none"},Y=m((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"},"Price:",-1)})),K={class:"card-text text-left shadow-none col-md-8"},Q=m((function(){return Object(a["i"])("i",{class:"fas fa-dollar-sign"},null,-1)})),X={class:"row shadow-none"},Z=m((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Persons: ",-1)})),ee={class:"card-text text-left shadow-none col-md-8"},te=m((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none"}," Additional services: ",-1)})),ie={class:"row shadow-none",style:{"margin-left":"1%"}},ae={key:0,class:"additionalServices shadow-none"},ne={class:"manageReservation shadow-none"};function re(e,t,n,r,o,s){return Object(a["F"])(),Object(a["h"])("div",null,[Object(a["i"])("div",O,[Object(a["i"])("div",f,[Object(a["i"])("div",y,[Object(a["i"])("img",{style:{width:"100%",height:"225px","object-fit":"cover"},src:i("1771")("./"+n.entity.imagePath),class:"img-fluid rounded-start shadow-none"},null,8,g)]),Object(a["i"])("div",j,[Object(a["i"])("div",w,[Object(a["i"])("div",R,[Object(a["i"])("h5",k,Object(a["R"])(n.entity.name),1),"Upcoming"==n.entity.status?(Object(a["F"])(),Object(a["h"])("p",S,P)):Object(a["g"])("",!0),"Finished"==n.entity.status?(Object(a["F"])(),Object(a["h"])("p",A,F)):Object(a["g"])("",!0),"Current"==n.entity.status?(Object(a["F"])(),Object(a["h"])("p",T,M)):Object(a["g"])("",!0),"Report filled"==n.entity.status?(Object(a["F"])(),Object(a["h"])("p",I,E)):Object(a["g"])("",!0)]),Object(a["i"])("div",H,[Object(a["i"])("div",N,[Object(a["i"])("div",L,[_,Object(a["i"])("p",U," @"+Object(a["R"])(n.entity.clientName)+Object(a["R"])(n.entity.clientSurname),1)]),"adventure"!=e.entityType?(Object(a["F"])(),Object(a["h"])("div",z,[V,Object(a["i"])("p",W,Object(a["R"])(e.startDate)+" - "+Object(a["R"])(e.endDate),1)])):(Object(a["F"])(),Object(a["h"])("div",G,[$,Object(a["i"])("p",q,Object(a["R"])(e.startDate)+" ("+Object(a["R"])(e.hours)+"h) ",1)])),Object(a["i"])("div",J,[Y,Object(a["i"])("p",K,[Object(a["l"])(Object(a["R"])(n.entity.price)+" ",1),Q])]),Object(a["i"])("div",X,[Z,Object(a["i"])("p",ee,Object(a["R"])(n.entity.persons),1)]),te,Object(a["i"])("div",ie,[0==n.entity.additionalServices.length?(Object(a["F"])(),Object(a["h"])("p",ae," Not included ")):Object(a["g"])("",!0),(Object(a["F"])(!0),Object(a["h"])(a["a"],null,Object(a["M"])(n.entity.additionalServices,(function(e){return Object(a["F"])(),Object(a["h"])("p",{class:"additionalServices shadow-none",key:e.id},Object(a["R"])(e.name),1)})),128))])]),Object(a["i"])("div",ne,["Finished"==n.entity.status?(Object(a["F"])(),Object(a["h"])("button",{key:0,class:"btn btn-primary shadow-none mb-2",style:{"background-color":"#592073","border-color":"#b89fc3",width:"max-content","margin-bottom":"3rem !important"},onClick:t[0]||(t[0]=function(){return s.createReport&&s.createReport.apply(s,arguments)})}," Write report ")):Object(a["g"])("",!0),"Current"==n.entity.status?(Object(a["F"])(),Object(a["h"])("button",{key:1,class:"btn btn-primary shadow-none mb-2",style:{"background-color":"#026756","border-color":"#a0c6c0",width:"max-content","margin-bottom":"3rem !important"},onClick:t[1]||(t[1]=function(){return s.createReservation&&s.createReservation.apply(s,arguments)})}," New reservation ")):Object(a["g"])("",!0)])])])])])])])}var oe=i("c1df"),se=i.n(oe),ce=i("bc3a"),le=i.n(ce);le.a.defaults.baseURL="https://fishing-adventure-website-back.herokuapp.com";var de={props:["entity"],emits:["createReservation","createReport"],data:function(){return{date:"12/20/2021 - 12/25/2021",startDate:"",endDate:"",entityType:"",hours:""}},mounted:function(){var e=this;this.startDate=new Date(this.entity.startDate),this.endDate=new Date(this.entity.endDate),this.startDate=se()(this.startDate).format("MM/DD/yyyy HH:mm"),this.endDate=se()(this.endDate).format("MM/DD/yyyy HH:mm"),le.a.get("/users/getRole",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){var i=t.data;"ROLE_VACATION_HOME_OWNER"==i?e.entityType="cottage":"ROLE_BOAT_OWNER"==i?e.entityType="boat":"ROLE_FISHING_INSTRUCTOR"==i&&(e.entityType="adventure",e.hours=Math.abs(e.entity.startDate-e.entity.endDate)/36e5)}))},methods:{createReservation:function(){this.$emit("createReservation",this.entity.clientEmail,this.entity.clientName,this.entity.clientSurname)},createReport:function(){var e={reservationId:this.entity.reservationId,email:this.entity.clientEmail,name:this.entity.name,clientName:this.entity.clientName,clientSurname:this.entity.clientSurname,startDate:se()(new Date(this.entity.startDate)).format("MM/DD/yyyy HH:mm"),endDate:se()(new Date(this.entity.endDate)).format("MM/DD/yyyy HH:mm")};this.$emit("createReport",e)}}},he=(i("3c64"),i("6b0d")),ue=i.n(he);const be=ue()(de,[["render",re],["__scopeId","data-v-93a73bbc"]]);var pe=be,ve=function(e){return Object(a["I"])("data-v-67efcc5b"),e=e(),Object(a["G"])(),e},me={class:"modal-dialog modal-dialog-centered"},Oe={class:"modal-content",style:{height:"40.5rem"}},fe={class:"modal-header"},ye={style:{"font-size":"23px"}},ge=ve((function(){return Object(a["i"])("i",{class:"fas fa-times fa-lg"},null,-1)})),je=[ge],we={class:"modal-body"},Re={class:"element"},ke={style:{color:"white"}},Se=ve((function(){return Object(a["i"])("option",{value:""},null,-1)})),De=["value"],Pe={key:0},Ae=ve((function(){return Object(a["i"])("h6",{style:{color:"white",margin:"5% 0"}},"Reservation dates:",-1)})),xe={key:1},Fe=ve((function(){return Object(a["i"])("h6",{style:{color:"white",margin:"5% 0"}},"Reservation date:",-1)})),Te=ve((function(){return Object(a["i"])("h6",{style:{color:"white",margin:"5% 0"}}," Select additional services: ",-1)})),Ce={id:"table-wrapper",style:{"margin-top":"-5%"}},Me={id:"table-scroll"},Ie={class:"table"},Be={key:0,style:{color:"white"}},Ee={style:{color:"white"}},He={style:{color:"white"}},Ne=["id","onClick"],Le={class:"input-group",style:{"margin-top":"1rem"}},_e=ve((function(){return Object(a["i"])("span",{class:"input-group-text",style:{width:"5rem"}},"Persons:",-1)})),Ue=["max"],ze={class:"input-group",style:{"margin-top":"1rem"}},Ve=ve((function(){return Object(a["i"])("span",{class:"input-group-text",style:{width:"5rem"}},"Price:",-1)})),We={key:2,class:"input-group",style:{"margin-top":"1rem"}},Ge=ve((function(){return Object(a["i"])("span",{class:"input-group-text",style:{width:"9rem"}},"Owner presence:",-1)})),$e={class:"form-control",style:{display:"flex","justify-content":"space-around",padding:"0"}},qe={style:{color:"red","margin-top":"1rem"}},Je={class:"modal-footer steps-div"};function Ye(e,t,i,n,r,o){var s=Object(a["O"])("Datepicker");return Object(a["F"])(),Object(a["h"])("div",{class:"modal fade dark",id:"AdvertiserReservationModal","aria-labelledby":"OfferModalLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false",onShow:t[10]||(t[10]=function(){return o.closeModal&&o.closeModal.apply(o,arguments)})},[Object(a["i"])("div",me,[Object(a["i"])("div",Oe,[Object(a["i"])("div",fe,[Object(a["i"])("h3",ye," New reservation for "+Object(a["R"])(i.clientName)+" "+Object(a["R"])(i.clientSurname),1),Object(a["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=function(){return o.closeModal&&o.closeModal.apply(o,arguments)})},je)]),Object(a["i"])("div",we,[Object(a["i"])("div",Re,[Object(a["i"])("h6",ke,"Select "+Object(a["R"])(e.entityType),1),Object(a["i"])("select",{id:"entitySelectAR",onChange:t[1]||(t[1]=function(){return o.changeSelect&&o.changeSelect.apply(o,arguments)})},[Se,(Object(a["F"])(!0),Object(a["h"])(a["a"],null,Object(a["M"])(e.selectData,(function(e){return Object(a["F"])(),Object(a["h"])("option",{value:e.label,key:e.code},Object(a["R"])(e.label),9,De)})),128))],32)]),"adventure"!=e.entityType?(Object(a["F"])(),Object(a["h"])("span",Pe,[Ae,Object(a["m"])(s,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",modelValue:e.dateRange,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.dateRange=t}),onClosed:o.dateRangeChanged,placeholder:"Select dates..",range:"",enableTimePicker:!0},null,8,["modelValue","onClosed"])])):Object(a["g"])("",!0),"adventure"==e.entityType?(Object(a["F"])(),Object(a["h"])("span",xe,[Fe,Object(a["m"])(s,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",modelValue:e.adventureReservationDate,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.adventureReservationDate=t}),onClosed:o.dateRangeChanged,placeholder:"Select date..",enableTimePicker:!0},null,8,["modelValue","onClosed"])])):Object(a["g"])("",!0),Te,Object(a["i"])("div",Ce,[Object(a["i"])("div",Me,[Object(a["i"])("table",Ie,[Object(a["i"])("tbody",null,[void 0!=e.additionalServices&&e.additionalServices.length?Object(a["g"])("",!0):(Object(a["F"])(),Object(a["h"])("tr",Be," No additional services available ")),(Object(a["F"])(!0),Object(a["h"])(a["a"],null,Object(a["M"])(e.additionalServices,(function(e){return Object(a["F"])(),Object(a["h"])("tr",{key:e.id},[Object(a["i"])("td",null,[Object(a["i"])("label",Ee,Object(a["R"])(e.name),1)]),Object(a["i"])("td",null,[Object(a["i"])("label",He,Object(a["R"])(e.price)+" $",1)]),Object(a["i"])("td",null,[Object(a["i"])("input",{id:e.id,type:"checkbox",onClick:function(t){return o.check(e)}},null,8,Ne)])])})),128))])])])]),Object(a["i"])("div",Le,[_e,Object(a["ab"])(Object(a["i"])("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.persons=t}),max:e.maxPersons,min:"1",class:"form-control"},null,8,Ue),[[a["W"],e.persons]])]),Object(a["i"])("div",ze,[Ve,Object(a["ab"])(Object(a["i"])("input",{disabled:"",type:"number","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.priceField=t}),min:"0",class:"form-control",onChange:t[6]||(t[6]=function(){return e.recalculatePrice&&e.recalculatePrice.apply(e,arguments)})},null,544),[[a["W"],e.priceField]])]),"boat"==e.entityType?(Object(a["F"])(),Object(a["h"])("div",We,[Ge,Object(a["i"])("div",$e,[Object(a["i"])("div",{class:"ownerPresence",onClick:t[7]||(t[7]=function(){return o.changeOwnerPresence&&o.changeOwnerPresence.apply(o,arguments)}),id:"yesOwnerPresence"}," YES "),Object(a["i"])("div",{class:"ownerPresence",onClick:t[8]||(t[8]=function(){return o.changeOwnerPresence&&o.changeOwnerPresence.apply(o,arguments)}),id:"noOwnerPresence"}," NO ")])])):Object(a["g"])("",!0),Object(a["i"])("h6",qe,[Object(a["i"])("b",null,Object(a["R"])(e.error),1)])]),Object(a["i"])("div",Je,[Object(a["i"])("button",{type:"button",class:"btn btn-outline-primary",onClick:t[9]||(t[9]=function(){return o.createReservation&&o.createReservation.apply(o,arguments)})}," Create ")])])])],32)}i("caad"),i("2532"),i("a434");le.a.defaults.baseURL="https://fishing-adventure-website-back.herokuapp.com";var Ke={components:{},props:["clientEmail","clientName","clientSurname"],name:"OfferModal",data:function(){return{serviceProfileId:"",persons:1,maxPersons:"",priceField:"",pricePerTimeFrame:"",selectData:"",entityType:"",additionalServices:[],dateRange:[],chosenServices:[],error:"",originalTotalPrice:"",adventureReservationDate:void 0,priceForPeriod:0,priceForServices:0,adventureDurationInMins:[],available:!1,ownerPresence:!1}},mounted:function(){var e=this;le.a.get("/users/getRole",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){var i=t.data;"ROLE_VACATION_HOME_OWNER"==i?(e.entityType="cottage",e.getServiceProfileByHomeOwner()):"ROLE_BOAT_OWNER"==i?(e.entityType="boat",e.getServiceProfileByBoatOwner()):"ROLE_FISHING_INSTRUCTOR"==i&&(e.entityType="adventure",e.getServiceProfileByFishingInstructor())}))},methods:{getAdditionalServicesByName:function(e){var t=this;le.a.get("/serviceProfile/getAdditionalServicesByName/"+e,{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(e){t.additionalServices=e.data}))},changeSelect:function(){var e=this,t=document.getElementById("entitySelectAR").value;this.priceForPeriod=0,this.priceForServices=0,this.priceField="",this.originalTotalPrice=0,""!=t?(this.getAdditionalServicesByName(t),le.a.get("/serviceProfile/getServiceInfoForOfferByName/"+t,{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.pricePerTimeFrame=t.data.price,e.originalPricePerDay=t.data.price,e.maxPersons=t.data.persons,e.serviceProfileId=t.data.serviceProfileId,e.persons>e.maxPersons&&(e.persons=e.maxPersons),"adventure"==e.entityType&&le.a.get("/fishingAdventure/getDurationById/"+e.serviceProfileId,{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.adventureDurationInMins=t.data}))}))):(this.serviceProfileId="",this.persons=1,this.maxPersons=1,this.priceField="",this.pricePerTimeFrame="",this.additionalServices=[],this.dateRange=[],this.chosenServices=[],this.error="",this.adventureReservationDate=void 0,this.priceForPeriod=0,this.priceForServices=0,this.originalTotalPrice=0,this.available=!1),this.dateRangeChanged()},dateRangeChanged:function(){var e=this;if(void 0!=this.dateRange[0]&&void 0!=this.dateRange[1]){var t=this.dateRange[1]-this.dateRange[0],i=t/864e5;i=parseInt(i,10);var a=t/36e5-24*i;a=parseInt(a,10),a>12&&(i+=1),this.priceForPeriod=i*this.originalPricePerDay,this.originalTotalPrice=this.priceForPeriod+this.priceForServices,this.priceField=this.originalTotalPrice,"cottage"==this.entityType?le.a.get("/vacationHome/available/dateRange?id="+this.serviceProfileId+"&start="+se()(this.dateRange[0]).format("yyyy-MM-DD HH:mm:ss.SSS")+"&end="+se()(this.dateRange[1]).format("yyyy-MM-DD HH:mm:ss.SSS"),{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){t.data?(e.available=!0,e.error=""):(e.error="Chosen date is not available.",e.available=!1)})):le.a.get("/boat/available/dateRange?id="+this.serviceProfileId+"&start="+se()(this.dateRange[0]).format("yyyy-MM-DD HH:mm:ss.SSS")+"&end="+se()(this.dateRange[1]).format("yyyy-MM-DD HH:mm:ss.SSS"),{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){t.data?e.ownerPresence?e.checkBoatOwnerAvailability():(e.available=!0,e.error=""):(e.error="Chosen date is not available.",e.available=!1)}))}else if(void 0!=this.adventureReservationDate){var n=this.adventureReservationDate,r=new Date(n.getTime()+6e4*this.adventureDurationInMins);le.a.get("/fishingAdventure/isInstructorAvailable?start="+se()(n).format("yyyy-MM-DD HH:mm:ss.SSS")+"&end="+se()(r).format("yyyy-MM-DD HH:mm:ss.SSS"),{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){t.data?(e.available=!0,e.error=""):(e.error="Chosen date is not available.",e.available=!1)})),this.priceForPeriod=this.pricePerTimeFrame,this.originalTotalPrice=this.priceForPeriod+this.priceForServices,this.priceField=this.originalTotalPrice}},changeOwnerPresence:function(e){var t=e.target.innerHTML;t.includes("YES")?(document.getElementById("noOwnerPresence").classList.remove("active"),document.getElementById("yesOwnerPresence").classList.add("active"),this.ownerPresence=!0,""!=this.serviceProfileId&&this.checkBoatOwnerAvailability()):(document.getElementById("yesOwnerPresence").classList.remove("active"),document.getElementById("noOwnerPresence").classList.add("active"),this.ownerPresence=!1),this.dateRangeChanged()},check:function(e){var t=document.getElementById(e.id);if(!0===t.checked)this.chosenServices.push(e),this.priceForServices+=e.price;else{var i=this.chosenServices.indexOf(e);this.priceForServices-=e.price,i>-1&&this.chosenServices.splice(i,1)}this.originalTotalPrice=this.priceForPeriod+this.priceForServices,this.priceField=this.originalTotalPrice},createReservation:function(){if(this.available)if(this.maxPersons<this.persons)this.error="Maximum number of people is "+this.maxPersons+".";else{var e=[],t=[],i=[];"adventure"==this.entityType?(e=this.adventureReservationDate,i=!0,t=new Date(e.getTime()+6e4*this.adventureDurationInMins)):(e=this.dateRange[0],t=this.dateRange[1],i="cottage"==this.entityType||this.ownerPresence);var a={serviceId:this.serviceProfileId,startDate:e,endDate:t,persons:this.persons,chosenServices:this.chosenServices,price:this.priceField,ownersPresence:i,clientEmail:this.clientEmail};le.a.post("/reservation/newByAdvertiser",a,{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then(window.location.reload())}else"boat"!=this.entityType&&(this.error="Chosen date is not available.")},closeModal:function(){this.persons=1,this.maxPersons=1,this.priceField="",this.pricePerTimeFrame="",this.entityType="",this.additionalServices=[],this.dateRange=[],this.chosenServices=[],this.error="",this.adventureReservationDate=void 0,this.priceForPeriod=0,this.priceForServices=0,this.originalTotalPrice=0,this.available=!1,document.getElementById("entitySelectAR").value=""},getServiceProfileByHomeOwner:function(){var e=this;le.a.get("/vacationHome/getNamesByUser",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.selectData=t.data}))},getServiceProfileByBoatOwner:function(){var e=this;le.a.get("/boat/getNamesByUser",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){document.getElementById("noOwnerPresence").classList.add("active"),e.selectData=t.data}))},getServiceProfileByFishingInstructor:function(){var e=this;le.a.get("/fishingAdventure/getNamesByUser",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.selectData=t.data}))},checkBoatOwnerAvailability:function(){var e=this;le.a.get("/boatOwner/available/dateRange?id="+this.serviceProfileId+"&start="+se()(this.dateRange[0]).format("yyyy-MM-DD HH:mm:ss.SSS")+"&end="+se()(this.dateRange[1]).format("yyyy-MM-DD HH:mm:ss.SSS"),{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){t.data?(e.available=!0,e.error=""):(e.error="Boat owner is not available.",e.available=!1)}))}}};i("6017");const Qe=ue()(Ke,[["render",Ye],["__scopeId","data-v-67efcc5b"]]);var Xe=Qe,Ze=function(e){return Object(a["I"])("data-v-a03b7904"),e=e(),Object(a["G"])(),e},et={class:"modal-dialog modal-dialog-centered"},tt={class:"modal-content",style:{height:"37rem"}},it={class:"modal-header"},at=Ze((function(){return Object(a["i"])("h3",{style:{"font-size":"23px"}},"Reservation report",-1)})),nt=Ze((function(){return Object(a["i"])("i",{class:"fas fa-times fa-lg"},null,-1)})),rt=[nt],ot={class:"modal-body"},st={style:{display:"flex","justify-content":"space-evenly","margin-top":"1rem"}},ct=Ze((function(){return Object(a["i"])("div",{class:"infoDiv"},[Object(a["i"])("h6",null,"Reservation name:"),Object(a["i"])("div",null,[Object(a["i"])("h6",{style:{"text-align":"left"}},"From:"),Object(a["i"])("h6",{style:{"text-align":"left"}},"To:")]),Object(a["i"])("h6",null,"Client:")],-1)})),lt={class:"infoDiv"},dt={class:"clientDiv"},ht={key:0,class:"optionsDiv"},ut={key:1,class:"textareaDiv"},bt={class:"selectedOption"},pt=Ze((function(){return Object(a["i"])("i",{class:"fas fa-times fa-lg"},null,-1)})),vt=[pt],mt={style:{color:"red","margin-top":"1rem"}},Ot={class:"modal-footer steps-div"};function ft(e,t,i,n,r,o){return Object(a["F"])(),Object(a["h"])("div",{class:"modal fade dark",id:"AdvertiserReportModal","aria-labelledby":"OfferModalLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false",onShow:t[7]||(t[7]=function(){return o.closeModal&&o.closeModal.apply(o,arguments)})},[Object(a["i"])("div",et,[Object(a["i"])("div",tt,[Object(a["i"])("div",it,[at,Object(a["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=function(){return o.closeModal&&o.closeModal.apply(o,arguments)})},rt)]),Object(a["i"])("div",ot,[Object(a["i"])("div",st,[ct,Object(a["i"])("div",lt,[Object(a["i"])("h6",null,Object(a["R"])(i.reportDto.name),1),Object(a["i"])("div",null,[Object(a["i"])("h6",null,Object(a["R"])(i.reportDto.startDate),1),Object(a["i"])("h6",null,Object(a["R"])(i.reportDto.endDate),1)]),Object(a["i"])("h6",dt,Object(a["R"])(i.reportDto.clientName)+Object(a["R"])(i.reportDto.clientSurname),1)])]),void 0==e.selectedOption?(Object(a["F"])(),Object(a["h"])("div",ht,[Object(a["i"])("div",{class:"reportOptions",onClick:t[1]||(t[1]=function(){return o.selectOption&&o.selectOption.apply(o,arguments)}),id:"pleasant"}," Pleasant appointment "),Object(a["i"])("div",{class:"reportOptions",onClick:t[2]||(t[2]=function(){return o.selectOption&&o.selectOption.apply(o,arguments)}),id:"sanction"}," Request sanction "),Object(a["i"])("div",{class:"reportOptions",onClick:t[3]||(t[3]=function(){return o.selectOption&&o.selectOption.apply(o,arguments)}),id:"showUp"}," Client didn't show up ")])):Object(a["g"])("",!0),void 0!=e.selectedOption?(Object(a["F"])(),Object(a["h"])("div",ut,[Object(a["i"])("div",bt,[Object(a["l"])(Object(a["R"])(e.selectedOption)+" ",1),Object(a["i"])("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=function(){return o.deselectOption&&o.deselectOption.apply(o,arguments)})},vt)]),Object(a["ab"])(Object(a["i"])("textarea",{placeholder:"Write your report..","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.content=t})},null,512),[[a["W"],e.content]])])):Object(a["g"])("",!0),Object(a["i"])("h6",mt,[Object(a["i"])("b",null,Object(a["R"])(e.error),1)])]),Object(a["i"])("div",Ot,[Object(a["i"])("button",{type:"button",class:"btn btn-outline-primary",onClick:t[6]||(t[6]=function(){return o.createReport&&o.createReport.apply(o,arguments)})}," Create ")])])])],32)}le.a.defaults.baseURL="https://fishing-adventure-website-back.herokuapp.com";var yt={components:{},emits:["reportEntered"],props:["reportDto"],name:"ReportModal",data:function(){return{content:"",error:"",selectedOption:void 0}},mounted:function(){},methods:{selectOption:function(e){this.error="";var t=e.currentTarget.id;document.getElementById("pleasant").classList.remove("active"),document.getElementById("showUp").classList.remove("active"),document.getElementById("sanction").classList.remove("active"),document.getElementById(t).classList.add("active"),this.selectedOption=e.target.innerHTML},deselectOption:function(){this.selectedOption=void 0},closeModal:function(){this.content="",this.error="",this.selectedOption=void 0},createReport:function(){var e=this;if(void 0==this.selectedOption)this.error="Please select one of the options offerd.";else{this.error="";var t="";this.selectedOption.toLowerCase().includes("show")?t="didntShowUp":this.selectedOption.toLowerCase().includes("sanction")&&(t="sanctionRequest");var i={reservationId:this.reportDto.reservationId,content:this.content,option:t};le.a.post("/reservationReport",i,{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(){window.location.reload(),e.$toast.show("Thank you for your entry!")}))}}}};i("b848"),i("8b1c");const gt=ue()(yt,[["render",ft],["__scopeId","data-v-a03b7904"]]);var jt=gt;le.a.defaults.baseURL="https://fishing-adventure-website-back.herokuapp.com";var wt={components:{AdvertiserReservationCard:pe,AdvertiserReservationModal:Xe,AdvertiserReportModal:jt},data:function(){return{numberOfPersons:"",range:{start:new Date(2020,9,12),end:new Date(2020,9,16)},date:"",searchText:"",searchResults:[],entities:[],clientEmail:"",clientName:"",clientSurname:"",reportDto:""}},mounted:function(){var e=this;le.a.get("/reservation/allByAdvertiser",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.searchResults=t.data,e.entities=t.data}))},methods:{createReservation:function(e,t,i){this.clientEmail=e,this.clientName=t,this.clientSurname=i;var a=document.getElementById("AdvertiserReservationModal"),n=window.bootstrap.Modal.getOrCreateInstance(a);n.show()},createReport:function(e){this.reportDto=e;var t=document.getElementById("AdvertiserReportModal"),i=window.bootstrap.Modal.getOrCreateInstance(t);i.show()}}};i("bd60");const Rt=ue()(wt,[["render",v],["__scopeId","data-v-5fd381c5"]]);t["default"]=Rt},"4e4e":function(e,t,i){},6017:function(e,t,i){"use strict";i("b91e")},"8b1c":function(e,t,i){"use strict";i("df25")},a434:function(e,t,i){"use strict";var a=i("23e7"),n=i("da84"),r=i("23cb"),o=i("5926"),s=i("07fa"),c=i("7b0b"),l=i("65f0"),d=i("8418"),h=i("1dde"),u=h("splice"),b=n.TypeError,p=Math.max,v=Math.min,m=9007199254740991,O="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var i,a,n,h,u,f,y=c(this),g=s(y),j=r(e,g),w=arguments.length;if(0===w?i=a=0:1===w?(i=0,a=g-j):(i=w-2,a=v(p(o(t),0),g-j)),g+i-a>m)throw b(O);for(n=l(y,a),h=0;h<a;h++)u=j+h,u in y&&d(n,h,y[u]);if(n.length=a,i<a){for(h=j;h<g-a;h++)u=h+a,f=h+i,u in y?y[f]=y[u]:delete y[f];for(h=g;h>g-a+i;h--)delete y[h-1]}else if(i>a)for(h=g-a;h>j;h--)u=h+a-1,f=h+i-1,u in y?y[f]=y[u]:delete y[f];for(h=0;h<i;h++)y[h+j]=arguments[h+2];return y.length=g-a+i,n}})},b848:function(e,t,i){"use strict";i("0e08")},b91e:function(e,t,i){},bd60:function(e,t,i){"use strict";i("d1cd")},d1cd:function(e,t,i){},df25:function(e,t,i){}}]);
//# sourceMappingURL=chunk-2cba4861.377fd46d.js.map