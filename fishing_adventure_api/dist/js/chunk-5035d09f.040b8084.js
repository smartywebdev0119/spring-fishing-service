(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5035d09f"],{"0468":function(e,t,i){"use strict";i("b42b")},1148:function(e,t,i){"use strict";var a=i("da84"),n=i("5926"),r=i("577e"),o=i("1d80"),s=a.RangeError;e.exports=function(e){var t=r(o(this)),i="",a=n(e);if(a<0||a==1/0)throw s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(i+=t);return i}},"51df":function(e,t,i){"use strict";i("b5f6")},7734:function(e,t,i){"use strict";i("ad36")},"77f2":function(e,t,i){},"84ed":function(e,t,i){"use strict";i("77f2")},a434:function(e,t,i){"use strict";var a=i("23e7"),n=i("da84"),r=i("23cb"),o=i("5926"),s=i("07fa"),c=i("7b0b"),l=i("65f0"),d=i("8418"),h=i("1dde"),u=h("splice"),b=n.TypeError,f=Math.max,p=Math.min,O=9007199254740991,v="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var i,a,n,h,u,m,g=c(this),y=s(g),j=r(e,y),w=arguments.length;if(0===w?i=a=0:1===w?(i=0,a=y-j):(i=w-2,a=p(f(o(t),0),y-j)),y+i-a>O)throw b(v);for(n=l(g,a),h=0;h<a;h++)u=j+h,u in g&&d(n,h,g[u]);if(n.length=a,i<a){for(h=j;h<y-a;h++)u=h+a,m=h+i,u in g?g[m]=g[u]:delete g[m];for(h=y;h>y-a+i;h--)delete g[h-1]}else if(i>a)for(h=y-a;h>j;h--)u=h+a-1,m=h+i-1,u in g?g[m]=g[u]:delete g[m];for(h=0;h<i;h++)g[h+j]=arguments[h+2];return g.length=y-a+i,n}})},ad36:function(e,t,i){},b42b:function(e,t,i){},b5f6:function(e,t,i){},b680:function(e,t,i){"use strict";var a=i("23e7"),n=i("da84"),r=i("e330"),o=i("5926"),s=i("408a"),c=i("1148"),l=i("d039"),d=n.RangeError,h=n.String,u=Math.floor,b=r(c),f=r("".slice),p=r(1..toFixed),O=function(e,t,i){return 0===t?i:t%2===1?O(e,t-1,i*e):O(e*e,t/2,i)},v=function(e){var t=0,i=e;while(i>=4096)t+=12,i/=4096;while(i>=2)t+=1,i/=2;return t},m=function(e,t,i){var a=-1,n=i;while(++a<6)n+=t*e[a],e[a]=n%1e7,n=u(n/1e7)},g=function(e,t){var i=6,a=0;while(--i>=0)a+=e[i],e[i]=u(a/t),a=a%t*1e7},y=function(e){var t=6,i="";while(--t>=0)if(""!==i||0===t||0!==e[t]){var a=h(e[t]);i=""===i?a:i+b("0",7-a.length)+a}return i},j=l((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!l((function(){p({})}));a({target:"Number",proto:!0,forced:j},{toFixed:function(e){var t,i,a,n,r=s(this),c=o(e),l=[0,0,0,0,0,0],u="",p="0";if(c<0||c>20)throw d("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return h(r);if(r<0&&(u="-",r=-r),r>1e-21)if(t=v(r*O(2,69,1))-69,i=t<0?r*O(2,-t,1):r/O(2,t,1),i*=4503599627370496,t=52-t,t>0){m(l,0,i),a=c;while(a>=7)m(l,1e7,0),a-=7;m(l,O(10,a,1),0),a=t-1;while(a>=23)g(l,1<<23),a-=23;g(l,1<<a),m(l,1,1),g(l,2),p=y(l)}else m(l,0,i),m(l,1<<-t,0),p=y(l)+b("0",c);return c>0?(n=p.length,p=u+(n<=c?"0."+b("0",c-n)+p:f(p,0,n-c)+"."+f(p,n-c))):p=u+p,p}})},d7e1:function(e,t,i){"use strict";i.r(t);var a=i("7a23"),n=i("f4c8"),r=i.n(n),o=function(e){return Object(a["I"])("data-v-ab602b78"),e=e(),Object(a["G"])(),e},s=o((function(){return Object(a["i"])("div",{class:"title"},[Object(a["i"])("h1",null,"My special offers"),Object(a["i"])("img",{style:{height:"10rem"},src:r.a})],-1)})),c={style:{"background-color":"#212529",padding:"15px","text-align":"-webkit-center"}},l={class:"container w-100 row row-cols-1 row-cols-sm-1 row-cols-md-4",style:{"justify-content":"space-evenly","align-items":"center"}},d=o((function(){return Object(a["i"])("div",{class:"col-md-2"},[Object(a["i"])("button",{type:"button",class:"btn btn-outline-primary text-nowrap me-2","data-bs-toggle":"modal","data-bs-target":"#OfferModal"}," New offer ")],-1)})),h=o((function(){return Object(a["i"])("div",{class:"col-md-5"},[Object(a["i"])("input",{class:"form-control me-2",type:"search",placeholder:"Search","aria-label":"Search"})],-1)})),u={class:"col-md-5"},b={style:{"margin-top":"5%"}};function f(e,t,i,n,r,o){var f=Object(a["O"])("Datepicker"),p=Object(a["O"])("OffersCard"),O=Object(a["O"])("OfferModal");return Object(a["F"])(),Object(a["h"])(a["a"],null,[Object(a["i"])("div",null,[s,Object(a["i"])("div",c,[Object(a["i"])("div",l,[d,h,Object(a["i"])("div",u,[Object(a["m"])(f,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",id:"picker",modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.date=t}),placeholder:"Select date",range:"",enableTimePicker:!1},null,8,["modelValue"])])])]),Object(a["i"])("div",b,[(Object(a["F"])(!0),Object(a["h"])(a["a"],null,Object(a["M"])(e.offers,(function(t){return Object(a["F"])(),Object(a["f"])(p,{key:t.offerId,offer:t,entityType:e.entityType},null,8,["offer","entityType"])})),128))])]),Object(a["m"])(O,{id:"OfferModal"})],64)}i("b0c0");var p=function(e){return Object(a["I"])("data-v-be07a650"),e=e(),Object(a["G"])(),e},O={class:"card mb-3 bg-dark mt-3",style:{width:"65%",margin:"auto","background-color":"#7e000c3d !important"}},v={class:"row g-0"},m={class:"col-md-4 shadow-none"},g=["src"],y={class:"col-md-8 shadow-none",name:"main-col"},j={class:"card-body shadow-none"},w={class:"card-text shadow-none",style:{display:"flex"}},k={class:"card-title shadow-none"},P={class:"discountStatus shadow-none"},S={class:"shadow-none"},x={class:"card-text shadow-none",style:{display:"flex","align-items":"center"}},R={class:"shadow-none",style:{width:"100%"}},D={class:"row shadow-none"},T=p((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Reservation starts: ",-1)})),A={class:"card-text text-left shadow-none col-md-8"},F={class:"row shadow-none"},I=p((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Reservation ends: ",-1)})),C={class:"card-text text-left shadow-none col-md-8"},M={class:"row shadow-none"},B=p((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Offer ends in: ",-1)})),E={class:"card-text text-left shadow-none col-md-8"},N={class:"row shadow-none"},H=p((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"},"Price:",-1)})),_={class:"card-text text-left shadow-none col-md-8"},L=p((function(){return Object(a["i"])("i",{class:"fas fa-dollar-sign shadow-none",style:{"font-size":"80%"}},null,-1)})),V={key:0,class:"shadow-none"},z={class:"row shadow-none"},U=p((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Persons: ",-1)})),Y={class:"card-text text-left shadow-none col-md-8"},W={key:0,class:"row shadow-none"},q=p((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none col-md-4"}," Boat owner present: ",-1)})),G={class:"card-text text-left shadow-none col-md-8"},$={key:0,class:"fas fa-check",style:{color:"gray"}},J={key:1,class:"fas fa-times",style:{color:"gray"}},K=p((function(){return Object(a["i"])("p",{class:"card-text text-left shadow-none"}," Additional services: ",-1)})),Q={class:"row shadow-none",style:{"margin-left":"1%"}},X={key:0,class:"additionalServices shadow-none",style:{"text-align":"center"}},Z=p((function(){return Object(a["i"])("div",{class:"manageReservation shadow-none"},[Object(a["i"])("button",{class:"btn btn-outline-primary shadow-none mb-2","data-bs-toggle":"modal","data-bs-target":"#questionModal"}," Close offer ")],-1)}));function ee(e,t,n,r,o,s){var c=Object(a["O"])("YesNoModal");return Object(a["F"])(),Object(a["h"])(a["a"],null,[Object(a["i"])("div",null,[Object(a["i"])("div",O,[Object(a["i"])("div",v,[Object(a["i"])("div",m,[Object(a["i"])("img",{style:{width:"100%",height:"225px","object-fit":"cover"},src:i("1771")("./"+n.offer.coverImage),class:"img-fluid rounded-start shadow-none"},null,8,g)]),Object(a["i"])("div",y,[Object(a["i"])("div",j,[Object(a["i"])("div",w,[Object(a["i"])("h5",k,Object(a["R"])(n.offer.serviceProfileName),1),Object(a["i"])("p",P,[Object(a["i"])("b",S,Object(a["R"])(n.offer.discount)+"% OFF",1)])]),Object(a["i"])("div",x,[Object(a["i"])("div",R,[Object(a["i"])("div",D,[T,Object(a["i"])("p",A,Object(a["R"])(e.starts),1)]),Object(a["i"])("div",F,[I,Object(a["i"])("p",C,Object(a["R"])(e.ends),1)]),Object(a["i"])("div",M,[B,Object(a["i"])("p",E,Object(a["R"])(e.durationString),1)]),Object(a["i"])("div",N,[H,Object(a["i"])("p",_,[L,Object(a["l"])(Object(a["R"])(n.offer.price)+" ",1),"adventure"!=this.entityType?(Object(a["F"])(),Object(a["h"])("span",V,"/day")):Object(a["g"])("",!0)])]),Object(a["i"])("div",z,[U,Object(a["i"])("p",Y,Object(a["R"])(n.offer.maxPersons),1)]),"boat"==n.entityType?(Object(a["F"])(),Object(a["h"])("div",W,[q,Object(a["i"])("p",G,[n.offer.ownerPresence?(Object(a["F"])(),Object(a["h"])("i",$)):Object(a["g"])("",!0),n.offer.ownerPresence?Object(a["g"])("",!0):(Object(a["F"])(),Object(a["h"])("i",J))])])):Object(a["g"])("",!0),K,Object(a["i"])("div",Q,[0==n.offer.chosenServices.length?(Object(a["F"])(),Object(a["h"])("p",X," Not included ")):Object(a["g"])("",!0),(Object(a["F"])(!0),Object(a["h"])(a["a"],null,Object(a["M"])(n.offer.chosenServices,(function(e){return Object(a["F"])(),Object(a["h"])("p",{class:"additionalServices shadow-none",key:e.id},Object(a["R"])(e.name),1)})),128))])]),Z])])])])])]),Object(a["m"])(c,{question:"Are you sure you want to close this offer?",onAnswer:s.modalAnswer,id:"questionModal"},null,8,["onAnswer"])],64)}var te=i("c1df"),ie=i.n(te),ae=i("bc3a"),ne=i.n(ae),re={class:"modal fade dark",id:"YesNoModal","aria-labelledby":"YesNoModalLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},oe={class:"modal-dialog modal-dialog-centered"},se={class:"modal-content",style:{height:"auto"}},ce={class:"modal-body",style:{"text-align":"center",padding:"2rem 0px",color:"white"}},le={class:"modal-footer"};function de(e,t,i,n,r,o){var s=this;return Object(a["F"])(),Object(a["h"])("div",re,[Object(a["i"])("div",oe,[Object(a["i"])("div",se,[Object(a["i"])("div",ce,[Object(a["i"])("h2",null,Object(a["R"])(i.question),1)]),Object(a["i"])("div",le,[Object(a["i"])("button",{type:"button",style:{width:"4rem"},class:"btn btn-outline-primary",onClick:t[0]||(t[0]=function(e){return s.$emit("answer","yes")}),"data-bs-dismiss":"modal"}," Yes "),Object(a["i"])("button",{type:"button",style:{width:"4rem"},class:"btn btn-outline-primary",onClick:t[1]||(t[1]=function(e){return s.$emit("answer","no")}),"data-bs-dismiss":"modal"}," No ")])])])])}var he={components:{},name:"YesNoModal",props:["question"]},ue=(i("51df"),i("6b0d")),be=i.n(ue);const fe=be()(he,[["render",de],["__scopeId","data-v-3c4c65ec"]]);var pe=fe;ne.a.defaults.baseURL="https://fishing-adventure-website-back.herokuapp.com";var Oe={props:["offer","entityType"],components:{YesNoModal:pe},data:function(){return{date:"12/20/2021 - 12/25/2021",discount:"50",duration:"",ends:"",starts:"",durationString:""}},mounted:function(){this.ends=new Date(this.offer.endDate),this.starts=new Date(this.offer.startDate);var e=this.offer.dateCreated+this.offer.duration;this.ends=ie()(this.ends).format("MM/DD/yyyy HH:mm"),this.starts=ie()(this.starts).format("MM/DD/yyyy HH:mm");var t=e-new Date,i=t/864e5;i=parseInt(i,10);var a=t/36e5-24*i;a=parseInt(a,10);var n=t/6e4-24*i*60-60*a;n=parseInt(n,10),this.durationString=i+"d "+a+"h "+n+"m"},methods:{modalAnswer:function(e){"yes"==e&&this.closeOffer()},closeOffer:function(){ne.a.delete("/appointment/"+this.offer.offerId+"/"+this.offer.serviceProfileId,{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(){window.location.reload()}))}}};i("0468");const ve=be()(Oe,[["render",ee],["__scopeId","data-v-be07a650"]]);var me=ve,ge=function(e){return Object(a["I"])("data-v-3b135a68"),e=e(),Object(a["G"])(),e},ye={class:"modal-dialog modal-dialog-centered"},je={class:"modal-content",id:"modalContent"},we={class:"modal-header"},ke=ge((function(){return Object(a["i"])("h3",null,"New offer",-1)})),Pe=ge((function(){return Object(a["i"])("i",{class:"fas fa-times fa-lg"},null,-1)})),Se=[Pe],xe={class:"modal-body"},Re={class:"discountStatus shadow-none"},De={class:"shadow-none"},Te={class:"element"},Ae={style:{color:"white"}},Fe=ge((function(){return Object(a["i"])("option",{value:""},null,-1)})),Ie=["value"],Ce=ge((function(){return Object(a["i"])("h6",{style:{color:"white",margin:"5% 0"}}," Offer will be active until: ",-1)})),Me={key:0},Be=ge((function(){return Object(a["i"])("h6",{style:{color:"white",margin:"5% 0"}},"Reservation dates:",-1)})),Ee={key:1},Ne=ge((function(){return Object(a["i"])("h6",{style:{color:"white",margin:"5% 0"}},"Reservation date:",-1)})),He=ge((function(){return Object(a["i"])("h6",{style:{color:"white",margin:"5% 0"}}," Select additional services: ",-1)})),_e={id:"table-wrapper",style:{"margin-top":"-5%"}},Le={id:"table-scroll"},Ve={class:"table"},ze={key:0,style:{color:"white"}},Ue={style:{color:"white"}},Ye={style:{color:"white"}},We=["id","onClick"],qe={class:"input-group",style:{"margin-top":"1rem"}},Ge=ge((function(){return Object(a["i"])("span",{class:"input-group-text",style:{width:"5rem"}},"Persons:",-1)})),$e=["max"],Je={class:"input-group",style:{"margin-top":"1rem"}},Ke=ge((function(){return Object(a["i"])("span",{class:"input-group-text",style:{width:"5rem"}},"Price:",-1)})),Qe=["max"],Xe={key:2,class:"input-group",style:{"margin-top":"1rem"}},Ze=ge((function(){return Object(a["i"])("span",{class:"input-group-text",style:{width:"9rem"}},"Owner presence:",-1)})),et={class:"form-control",style:{display:"flex","justify-content":"space-around",padding:"0"}},tt={style:{color:"red","margin-top":"1rem"}},it={key:3,style:{color:"red"}},at=ge((function(){return Object(a["i"])("b",null,"(Check availability dates)",-1)})),nt=[at],rt={class:"modal-footer steps-div"};function ot(e,t,i,n,r,o){var s=Object(a["O"])("Datepicker");return Object(a["F"])(),Object(a["h"])("div",{class:"modal fade dark",id:"OfferModal","aria-labelledby":"OfferModalLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false",onShow:t[11]||(t[11]=function(){return o.closeModal&&o.closeModal.apply(o,arguments)})},[Object(a["i"])("div",ye,[Object(a["i"])("div",je,[Object(a["i"])("div",we,[ke,Object(a["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=function(){return o.closeModal&&o.closeModal.apply(o,arguments)})},Se)]),Object(a["i"])("div",xe,[Object(a["i"])("p",Re,[Object(a["i"])("b",De,Object(a["R"])(e.discount)+"% OFF",1)]),Object(a["i"])("div",Te,[Object(a["i"])("h6",Ae,"Select "+Object(a["R"])(e.entityType),1),Object(a["i"])("select",{id:"selectEl",onChange:t[1]||(t[1]=function(){return o.changeSelect&&o.changeSelect.apply(o,arguments)})},[Fe,(Object(a["F"])(!0),Object(a["h"])(a["a"],null,Object(a["M"])(e.selectData,(function(e){return Object(a["F"])(),Object(a["h"])("option",{value:e.label,key:e.code},Object(a["R"])(e.label),9,Ie)})),128))],32)]),Ce,Object(a["m"])(s,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",placeholder:"Select date..",modelValue:e.offerEndDate,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.offerEndDate=t}),enableTimePicker:!0,minDate:new Date},null,8,["modelValue","minDate"]),"adventure"!=e.entityType?(Object(a["F"])(),Object(a["h"])("span",Me,[Be,Object(a["m"])(s,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",id:"picker",modelValue:e.dateRange,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.dateRange=t}),onClosed:o.dateRangeChanged,placeholder:"Select dates..",range:"",enableTimePicker:!0,minDate:new Date},null,8,["modelValue","onClosed","minDate"])])):Object(a["g"])("",!0),"adventure"==e.entityType?(Object(a["F"])(),Object(a["h"])("span",Ee,[Ne,Object(a["m"])(s,{style:{width:"100%","margin-right":"10px",border:"1px solid white","border-radius":"5px"},dark:"",modelValue:e.adventureReservationDate,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.adventureReservationDate=t}),onClosed:o.dateRangeChanged,placeholder:"Select date..",enableTimePicker:!0,minDate:new Date},null,8,["modelValue","onClosed","minDate"])])):Object(a["g"])("",!0),He,Object(a["i"])("div",_e,[Object(a["i"])("div",Le,[Object(a["i"])("table",Ve,[Object(a["i"])("tbody",null,[void 0!=e.additionalServices&&e.additionalServices.length?Object(a["g"])("",!0):(Object(a["F"])(),Object(a["h"])("tr",ze," No additional services available ")),(Object(a["F"])(!0),Object(a["h"])(a["a"],null,Object(a["M"])(e.additionalServices,(function(e){return Object(a["F"])(),Object(a["h"])("tr",{key:e.id},[Object(a["i"])("td",null,[Object(a["i"])("label",Ue,Object(a["R"])(e.name),1)]),Object(a["i"])("td",null,[Object(a["i"])("label",Ye,Object(a["R"])(e.price)+" $",1)]),Object(a["i"])("td",null,[Object(a["i"])("input",{id:e.id,type:"checkbox",onClick:function(t){return o.check(e)}},null,8,We)])])})),128))])])])]),Object(a["i"])("div",qe,[Ge,Object(a["ab"])(Object(a["i"])("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.persons=t}),max:e.maxPersons,min:"1",class:"form-control"},null,8,$e),[[a["W"],e.persons]])]),Object(a["i"])("div",Je,[Ke,Object(a["ab"])(Object(a["i"])("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.priceField=t}),max:e.originalTotalPrice,min:"0",class:"form-control",onChange:t[7]||(t[7]=function(){return o.recalculatePrice&&o.recalculatePrice.apply(o,arguments)})},null,40,Qe),[[a["W"],e.priceField]])]),"boat"==e.entityType?(Object(a["F"])(),Object(a["h"])("div",Xe,[Ze,Object(a["i"])("div",et,[Object(a["i"])("div",{class:"ownerPresence",onClick:t[8]||(t[8]=function(){return o.changeOwnerPresence&&o.changeOwnerPresence.apply(o,arguments)}),id:"yesOwnerPresence"}," YES "),Object(a["i"])("div",{class:"ownerPresence",onClick:t[9]||(t[9]=function(){return o.changeOwnerPresence&&o.changeOwnerPresence.apply(o,arguments)}),id:"noOwnerPresence"}," NO ")])])):Object(a["g"])("",!0),Object(a["i"])("h6",tt,[Object(a["i"])("b",null,Object(a["R"])(e.error),1)]),"Chosen date is not available."==e.error?(Object(a["F"])(),Object(a["h"])("h6",it,nt)):Object(a["g"])("",!0)]),Object(a["i"])("div",rt,[Object(a["i"])("button",{type:"button",class:"btn btn-outline-primary",onClick:t[10]||(t[10]=function(){return o.createOffer&&o.createOffer.apply(o,arguments)})}," Create ")])])])],32)}i("caad"),i("2532"),i("a434"),i("b680");ne.a.defaults.baseURL="https://fishing-adventure-website-back.herokuapp.com";var st={components:{},name:"OfferModal",data:function(){return{available:!1,serviceProfileId:"",persons:1,maxPersons:"",priceField:"",originalPricePerDay:"",selectData:"",entityType:"",discount:0,additionalServices:[],dateRange:[],chosenServices:[],error:"",offerEndDate:void 0,originalTotalPrice:"",priceForPeriod:0,priceForServices:0,adventureReservationDate:void 0,adventureDurationInMins:[],ownerPresence:!1}},mounted:function(){var e=this;ne.a.get("/users/getRole",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){var i=t.data;document.getElementById("modalContent").style="height: 48rem","ROLE_VACATION_HOME_OWNER"==i?(e.entityType="cottage",e.getServiceProfileByHomeOwner()):"ROLE_BOAT_OWNER"==i?(document.getElementById("modalContent").style="height: 53rem",e.entityType="boat",e.getServiceProfileByBoatOwner()):"ROLE_FISHING_INSTRUCTOR"==i?(e.entityType="adventure",e.getServiceProfileByFishingInstructor()):window.location.href="/"}))},methods:{changeSelect:function(){var e=this,t=document.getElementsByTagName("select")[0].value;""!=t?(ne.a.get("/serviceProfile/getAdditionalServicesByName/"+t,{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.additionalServices=t.data})),ne.a.get("/serviceProfile/getServiceInfoForOfferByName/"+t,{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.originalPricePerDay=t.data.price,e.maxPersons=t.data.persons,e.serviceProfileId=t.data.serviceProfileId,e.persons>e.maxPersons&&(e.persons=e.maxPersons),"adventure"==e.entityType&&ne.a.get("/fishingAdventure/getDurationById/"+e.serviceProfileId,{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.adventureDurationInMins=t.data}))}))):(this.serviceProfileId="",this.persons=1,this.maxPersons=1,this.priceField="",this.originalPricePerDay="",this.discount=0,this.additionalServices=[],this.dateRange=[],this.chosenServices=[],this.error="",this.offerEndDate=void 0,this.priceForPeriod=0,this.priceForServices=0,this.available=!1,this.adventureReservationDate=void 0),this.priceForServices=0,this.dateRangeChanged()},dateRangeChanged:function(){if(void 0!=this.dateRange[0]&&void 0!=this.dateRange[1]){var e=this.dateRange[1]-this.dateRange[0],t=e/864e5;t=parseInt(t,10);var i=e/36e5-24*t;i=parseInt(i,10),i>12&&(t+=1),this.priceForPeriod=t*this.originalPricePerDay,this.originalTotalPrice=this.priceForPeriod+this.priceForServices,this.priceField=this.originalTotalPrice,this.recalculatePrice(),this.checkAvailability()}else void 0!=this.adventureReservationDate&&(this.priceForPeriod=this.originalPricePerDay,this.originalTotalPrice=this.priceForPeriod+this.priceForServices,this.priceField=this.originalTotalPrice,this.checkAvailability(),this.recalculatePrice())},checkAvailability:function(){var e=this,t=[],i=[];"adventure"!=this.entityType?(t=this.dateRange[0],i=this.dateRange[1]):(t=this.adventureReservationDate,i=new Date(t.getTime()+6e4*this.adventureDurationInMins)),ne.a.get("/serviceProfile/isServiceAvailableForDateRange?id="+this.serviceProfileId+"&start="+ie()(t).format("yyyy-MM-DD HH:mm:ss.SSS")+"&end="+ie()(i).format("yyyy-MM-DD HH:mm:ss.SSS"),{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){t.data?e.ownerPresence?e.checkBoatOwnerAvailability():(e.available=!0,e.error=""):(e.error="Chosen date is not available.",e.available=!1)}))},changeOwnerPresence:function(e){var t=e.target.innerHTML;t.includes("YES")?(document.getElementById("noOwnerPresence").classList.remove("active"),document.getElementById("yesOwnerPresence").classList.add("active"),this.ownerPresence=!0,""!=this.serviceProfileId&&this.checkBoatOwnerAvailability()):(document.getElementById("yesOwnerPresence").classList.remove("active"),document.getElementById("noOwnerPresence").classList.add("active"),this.ownerPresence=!1),this.dateRangeChanged()},check:function(e){var t=document.getElementById(e.id);if(!0===t.checked)this.chosenServices.push(e),this.priceForServices+=e.price;else{var i=this.chosenServices.indexOf(e);this.priceForServices-=e.price,i>-1&&this.chosenServices.splice(i,1)}this.originalTotalPrice=this.priceForPeriod+this.priceForServices,this.priceField=this.originalTotalPrice,this.recalculatePrice()},recalculatePrice:function(){var e=this.dateRange[1]-this.dateRange[0],t=e/864e5;t=parseInt(t,10);var i=e/36e5-24*t;i=parseInt(i,10),i>12&&(t+=1);var a=(100*this.priceField/this.originalTotalPrice).toFixed(2);this.discount=(100-a).toFixed(2),"NaN"==this.discount&&(this.discount=0)},createOffer:function(){if(this.available)if(void 0==this.offerEndDate||void 0==this.dateRange[0]&&"adventure"!=this.entityType||void 0==this.adventureReservationDate&&"adventure"==this.entityType||""==document.getElementsByTagName("select")[0].value)this.error="All fields must be filled.";else{this.error="";var e=[],t=[],i=!0;if("adventure"==this.entityType?(e=this.adventureReservationDate,i=!0,t=new Date(e.getTime()+6e4*this.adventureDurationInMins)):(e=this.dateRange[0],t=this.dateRange[1],i="cottage"==this.entityType||this.ownerPresence),this.offerEndDate>t)this.error="Offer cannot cannot last longer than the chosen reservation.";else{var a=new Date,n=this.offerEndDate-a,r={serviceProfileId:this.serviceProfileId,discount:this.discount,startDate:e,endDate:t,maxPersons:this.persons,price:this.priceField,chosenServices:this.chosenServices,duration:n,ownerPresence:i};ne.a.post("/appointment/create",r,{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(){window.location.reload()}))}}else"boat"!=this.entityType&&(this.error="Chosen date is not available.")},closeModal:function(){document.getElementsByTagName("select")[0].value="",this.persons=1,this.maxPersons=1,this.priceField="",this.originalPricePerDay="",this.entityType="",this.discount=0,this.additionalServices=[],this.dateRange=[],this.chosenServices=[],this.error="",this.priceForPeriod=0,this.priceForServices=0,this.offerEndDate=void 0,this.adventureReservationDate=void 0},getServiceProfileByHomeOwner:function(){var e=this;ne.a.get("/vacationHome/getNamesByUser",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.selectData=t.data}))},getServiceProfileByBoatOwner:function(){var e=this;ne.a.get("/boat/getNamesByUser",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){document.getElementById("noOwnerPresence").classList.add("active"),e.selectData=t.data}))},getServiceProfileByFishingInstructor:function(){var e=this;ne.a.get("/fishingAdventure/getNamesByUser",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.selectData=t.data}))},checkBoatOwnerAvailability:function(){var e=this;ne.a.get("/boatOwner/available/dateRange?id="+this.serviceProfileId+"&start="+ie()(this.dateRange[0]).format("yyyy-MM-DD HH:mm:ss.SSS")+"&end="+ie()(this.dateRange[1]).format("yyyy-MM-DD HH:mm:ss.SSS"),{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){t.data?(e.available=!0,e.error=""):(e.error="Boat owner is not available.",e.available=!1)}))}}};i("84ed");const ct=be()(st,[["render",ot],["__scopeId","data-v-3b135a68"]]);var lt=ct;ne.a.defaults.baseURL="https://fishing-adventure-website-back.herokuapp.com";var dt={components:{OffersCard:me,OfferModal:lt},data:function(){return{numberOfPersons:"",date:"",offers:"",entityType:""}},mounted:function(){var e=this;ne.a.get("/users/getRole",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){var i=t.data;e.entityType="ROLE_FISHING_INSTRUCTOR"==i?"adventure":"ROLE_VACATION_HOME_OWNER"==i?"home":"boat",ne.a.get("/appointment/getOffersByAdvertiser",{headers:{"Access-Control-Allow-Origin":"https://fishing-adventure-website-back.herokuapp.com",Authorization:"Bearer "+localStorage.refreshToken}}).then((function(t){e.offers=t.data}))}))},methods:{}};i("7734");const ht=be()(dt,[["render",f],["__scopeId","data-v-ab602b78"]]);t["default"]=ht}}]);
//# sourceMappingURL=chunk-5035d09f.040b8084.js.map